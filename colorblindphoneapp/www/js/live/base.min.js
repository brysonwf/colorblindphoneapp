/*! base Wednesday, January 14th, 2015, 6:09:08 PM */
var CameraManager={init:function(){function a(){h=navigator.camera.PictureSourceType,i=navigator.camera.DestinationType}function b(a){var b=document.getElementById("canvas");b.style.display="block",b.src="data:image/jpeg;base64,"+a}function c(a){var b=document.getElementById("canvas");b.style.display="block",b.src=a}function d(){navigator.camera.getPicture(b,g,{quality:50,destinationType:i.DATA_URL})}function e(){navigator.camera.getPicture(b,g,{quality:20,allowEdit:!0,destinationType:i.DATA_URL})}function f(a){navigator.camera.getPicture(c,g,{quality:50,destinationType:i.FILE_URI,sourceType:a})}function g(a){alert("Failed because: "+a)}var h,i;document.addEventListener("deviceready",a,!1),$(".capture-photo").on("click",function(){d()}),$(".capture-editable").on("click",function(){e()}),$(".capture-library").on("click",function(){f(h.PHOTOLIBRARY)}),$(".capture-album").on("click",function(){f(h.SAVEDPHOTOALBUM)})}},EyeDroperManager={init:function(){var a,b=document.getElementById("canvas"),c=b.getContext("2d"),d=document.createElement("canvas"),e=d.getContext("2d"),f=[],g=document.getElementById("colors"),h=document.getElementById("output");b.addEventListener("click",function(c){var d=[window.scrollX+c.clientX-this.offsetLeft,window.scrollY+c.clientY-this.offsetTop],e=4*(d[1]*b.width+d[0]),i="rgba("+a[e].toString()+", "+a[e+1].toString()+", "+a[e+2].toString()+", "+(a[e+3]/255).toString()+")";f.push(i);var j=document.createElement("li");j.style.backgroundColor=i,g.appendChild(j),h.value="['"+f.join("', '")+"']"});var i=function(){var b=c.canvas.width=e.canvas.width=this.width,d=c.canvas.height=e.canvas.height=this.height;e.drawImage(this,0,0),a=e.getImageData(0,0,b,d).data,c.drawImage(this,0,0)},j=function(a){for(var b=/image.*/,d=0,f=a.length;f>d;d++){var g=a[d];if(g.type.match(b)){var h=document.createElement("img"),j=new FileReader;j.onload=function(a){return function(b){a.onload=i,a.src=b.target.result}}(h,c,e),j.readAsDataURL(g)}}};$(".file-upload").change(function(){j(this.files)})}};jQuery(document).ready(function(){CameraManager.init(),EyeDroperManager.init()});